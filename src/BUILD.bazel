load("@rules_cc//cc:defs.bzl", "cc_binary", "cc_library")
load("//rules:apollo_package.bzl", "apollo_cc_library")

package(default_visibility = ["//visibility:public"])

# -----------------------------------------------------------------------------
# Common target
# -----------------------------------------------------------------------------
cc_library(
    name = "common",
    srcs = [
        "common/common.cc",
    ],
    hdrs = [
        "common/common.h",
    ],
    deps = [
        "//proto:all_custom_cc_proto",
        "//src/common/math",
    ],
)

# -----------------------------------------------------------------------------
# framwork
# -----------------------------------------------------------------------------
cc_library(
    name = "framework",
    srcs = [
        "framework/component_interface.cc",
    ],
    hdrs = [
        "framework/component_interface.h",
        "framework/component_macro.h",
    ],
)

# -----------------------------------------------------------------------------
# planning_component
# -----------------------------------------------------------------------------
cc_library(
    name = "planning_component",
    srcs = [
        "component/planning_component.cc",
    ],
    hdrs = [
        "component/planning_component.h",
    ],
    deps = [
        "//proto:all_custom_cc_proto",
        "//src:framework",
        "//src/common/math",
    ],
)

# -----------------------------------------------------------------------------
# main
# -----------------------------------------------------------------------------
cc_binary(
    name = "main",
    srcs = ["main.cc"],
    linkopts = ["-ldl"],
)

# -----------------------------------------------------------------------------
# node
# -----------------------------------------------------------------------------
cc_binary(
    name = "node",
    srcs = ["node.cc"],
    linkshared = True,
    linkstatic = False,
    deps = [
        "//src:common",
        "//src:framework",
        "//src:planning_component",
    ],
)
